# ログインページ

- 使用テンプレート
  - default

- ページタイトル
  - ログイン

- ページ構成
  - ヘッダー
    - テンプレートに従う
  - 本文
    - ログインフォーム
      - **ID**もしくは**メールアドレス** `users.username OR users.email`
      - **パスワード**
        - phpのパスワードハッシュ関数を使用しハッシュ化したパスワードをデータベースに照会し、1行以上の行数が返ってくればログイン成功とし、セッションにUUID`users.id`とログイン中を示すフラグを立てる。
          - 上記処理の完了後にURLパラメータで示されたページへリダイレクトする。 //ここの処理についてフレームワークの理解が必要。
  - フッター
    - テンプレートに従う

- 影響する機能

  - ログインが必要なページ/全て

- 接続するデータベース

  - `SELECT 'id' WHERE 'username' = ':username' OR 'email' = ':email' AND 'password' = ':password'`
  - `SELECT COUNT('id') WHERE 'username' = ':username' OR 'email' = ':email' AND 'password' = ':password'`
  - `UPDATE 'users'('last_login_at') VALUES(NOW()) WHERE 'username' = ':username' OR 'email' = ':email' AND 'password' = ':password'`
  - //この処理について、もっと良い書き方がないか調査する。
  