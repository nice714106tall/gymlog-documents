# システム仕様書

## ページ構成
### 誰でも(ログアウト状態で)見られるページ
1. トップページ
2. 会員登録ページ
3. 会員登録完了ページ
4. ログインページ
6. 利用規約およびプライバシーポリシーページ

### ログイン後に(全ユーザーが)見られるページ
1. マイページ
2. プロフィール編集
3. 運動登録
4. 食事登録
5. マイボディ登録
6. ひとこと日記の投稿
7. ひとこと日記の編集・削除
8. (他ユーザーの)プロフィール閲覧
9. フォローリスト編集
10. ミュート(LINEのブロックに相当)リスト編集
11. フィード(フォローしているユーザのひとこと日記を新着順に列挙)
12. ユーザ定義運動内容の編集

### 管理者だけが(データベース上の「役割」を表すカラムに「管理者」を表すフラグがついているユーザーが)見られるページ
1. プリセット運動内容登録
2. プロフィール情報確認・変更・削除
3. NGワード管理
4. ひとこと日記内容確認・変更・削除

優先度は基本機能(ユーザ認証、運動登録)から
次にオプション機能(プロフィールや日記)
SNS機能は最後に作る


## データベース構成
### サーバー仕様
- mysqlを使用する。
- mysqlのバージョンは最新の8系ではなく、herokuの無料プランで使用できる5系とする。
- 2021年8月時点で5系の最新は5.7であるが、まだ公開から１か月強ということで解説をしているサイトは少ないということから5.6を選択する。

### テーブル仕様
#### users // ユーザー管理テーブル
- id varchar(255) primary key // uuid v4 を使用した 36 bytes を想定
- email varchar(255) not null // メールアドレス
- username varchar(255) not null // 
- password varchar(255) not null // ハッシュ化されたパスワード。 php の hash_password() 関数で生成される 60 bytes を想定。
- nickname varchar(255) not null // アプリ内で表示される名前
- role varchar(1023) null // 役割。jsonの記法で複数の役割を割り当て可能とする。（例）管理者に admin を付与し、管理ページのアクセスコントロールに使用することを想定。
- surname varchar(255) null // 氏名（姓）
- givenname varchar(255) null // 氏名（名）
- created_at datetime null // 登録日時
- updated_at datetime null // 変更日時

#### workouts // 運動内容マスタ
- id varchar(255) primary key // uuid v4 を使用した 36 bytes を想定
- name varchar(255) // 運動名
- calories unsigned smallint unsigned // 消費カロリー(0～65535)
- userid varchar(255) // users.idを参照。ユーザ定義アイテムの検索用。nullの場合は全員が使用可能。
- created_at datetime null // 登録日時
- updated_at datetime null // 変更日時

#### foods // 食事内容マスタ
- id varchar(255) primary key // uuid v4 を使用した 36 bytes を想定
- name varchar(255) // 運動名
- calories unsigned smallint unsigned // 摂取カロリー(0～65535)
- userid varchar(255) // users.idを参照。ユーザ定義アイテムの検索用。nullの場合は全員が使用可能。
- created_at datetime null // 登録日時
- updated_at datetime null // 変更日時

#### diaries // ひとこと日記テーブル
- id varchar(255) primary key // uuid v4 を使用した 36 bytes を想定
- userid varchar(255) // users.idを参照。
- title varchar(255) // 題名
- article varchar(4095) // 本文
- created_at datetime null // 登録日時
- updated_at datetime null // 変更日時

