# データベース仕様

## サーバー仕様

- mysqlを使用する。
- バージョンについては特に規定を設けず、サポート期間が長く、バグフィックスや脆弱性対応などのメンテナンスがきちんと行われている物とする。

## テーブル仕様

### users // ユーザー管理テーブル

- id varchar(255) primary key // uuid v4 を使用した 36 bytes を想定
- email varchar(255) not null // メールアドレス
- username varchar(255) not null // @id ツイッターのような使い方を想定
- password varchar(255) not null // ハッシュ化されたパスワード。 php の hash_password() 関数で生成される 60 bytes を想定。
- screenname varchar(255) not null // アプリ内で表示される名前
- role varchar(1023) null // 役割。jsonの記法で複数の役割を割り当て可能とする。（例）管理者に admin を付与し、管理ページのアクセスコントロールに使用することを想定。
- surname varchar(255) null // 氏名（姓）
- givenname varchar(255) null // 氏名（名）
- last_login_at datetime null // 最終ログイン日時
- created_at datetime null // 登録日時
- updated_at datetime null // 変更日時

### workouts // 運動内容マスタ

- id varchar(255) primary key // uuid v4 を使用した 36 bytes を想定
- name varchar(255) // 運動名
- calories unsigned smallint unsigned // 消費カロリー(0～65535)
- userid varchar(255) // users.idを参照。ユーザ定義アイテムの検索用。nullの場合は全員が使用可能。
- created_at datetime null // 登録日時
- updated_at datetime null // 変更日時

### foods // 食事内容マスタ

- id varchar(255) primary key // uuid v4 を使用した 36 bytes を想定
- name varchar(255) // 運動名
- calories unsigned smallint unsigned // 摂取カロリー(0～65535)
- userid varchar(255) // users.idを参照。ユーザ定義アイテムの検索用。nullの場合は全員が使用可能。
- created_at datetime null // 登録日時
- updated_at datetime null // 変更日時

### diaries // ひとこと日記テーブル

- id varchar(255) primary key // uuid v4 を使用した 36 bytes を想定
- userid varchar(255) // users.idを参照。
- title varchar(255) // 題名
- article varchar(4095) // 本文
- created_at datetime null // 登録日時
- updated_at datetime null // 変更日時

### blocklist // ブロックリスト

- id varchar(255) primary key // uuid v4 を使用した 36 bytes を想定
- userid varchar(255) // users.idを参照。
- target_userid varchar(255) // ブロック相手のusers.idを参照。
- created_at datetime null // 登録日時
- updated_at datetime null // 変更日時

### followlist // フォローリスト

- id varchar(255) primary key // uuid v4 を使用した 36 bytes を想定
- userid varchar(255) // users.idを参照。
- target_userid varchar(255) // フォロー相手のusers.idを参照。
- created_at datetime null // 登録日時
- updated_at datetime null // 変更日時

### news // お知らせ

- id varchar(255) primary key // uuid v4 を使用した 36 bytes を想定
- title varchar(255) // お知らせのタイトル
- article varchar(65535) // お知らせの本文
- created_at datetime null // 登録日時
- updated_at datetime null // 変更日時
